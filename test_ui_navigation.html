<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test - Navigation UI Plugin PolyToken</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 20px;
            background-color: #f8f9fa;
        }
        .test-section {
            background: white;
            padding: 20px;
            margin: 10px 0;
            border-radius: 8px;
            border: 1px solid #e1e5e9;
        }
        .success { color: #10b981; }
        .error { color: #ef4444; }
        .warning { color: #f59e0b; }
        .info { color: #6b7280; }
        button {
            background: #4f46e5;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover { background: #4338ca; }
        button:disabled { background: #9ca3af; cursor: not-allowed; }
        .log {
            background: #f3f4f6;
            padding: 10px;
            border-radius: 4px;
            font-family: monospace;
            font-size: 12px;
            margin: 10px 0;
            max-height: 300px;
            overflow-y: auto;
        }
        .step-indicator {
            display: flex;
            justify-content: space-between;
            margin: 20px 0;
            padding: 10px;
            background: #f9fafb;
            border-radius: 6px;
        }
        .step {
            flex: 1;
            text-align: center;
            padding: 8px;
            margin: 0 2px;
            border-radius: 4px;
            background: #e5e7eb;
            transition: background-color 0.3s;
        }
        .step.active {
            background: #4f46e5;
            color: white;
        }
        .nav-buttons {
            display: flex;
            gap: 10px;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <h1>üß™ Test de Navigation UI - Plugin PolyToken</h1>

    <div class="step-indicator">
        <div class="step" id="step0">√âtape 0: Accueil</div>
        <div class="step" id="step1">√âtape 1: Biblioth√®que</div>
        <div class="step" id="step2">√âtape 2: Configuration</div>
        <div class="step" id="step3">√âtape 3: Aper√ßu</div>
        <div class="step" id="step4">√âtape 4: Audit</div>
    </div>

    <div class="test-section">
        <h2>Test 1: Navigation Automatique</h2>
        <p class="info">Test automatique de toutes les transitions d'√©tapes</p>
        <button onclick="testAutoNavigation()">D√©marrer navigation auto</button>
        <button onclick="stopAutoNavigation()">Arr√™ter</button>
        <div id="autoNavResult" class="log"></div>
    </div>

    <div class="test-section">
        <h2>Test 2: Navigation Manuelle</h2>
        <p class="info">Test manuel des boutons de navigation</p>
        <div class="nav-buttons">
            <button onclick="switchStep(0)">Aller √† √âtape 0</button>
            <button onclick="switchStep(1)">Aller √† √âtape 1</button>
            <button onclick="switchStep(2)">Aller √† √âtape 2</button>
            <button onclick="switchStep(3)">Aller √† √âtape 3</button>
            <button onclick="switchStep(4)">Aller √† √âtape 4</button>
        </div>
        <div id="manualNavResult" class="log"></div>
    </div>

    <div class="test-section">
        <h2>Test 3: Boutons de Flux</h2>
        <p class="info">Test des boutons "Suivant", "Pr√©c√©dent", etc.</p>
        <button onclick="testFlowButtons()">Tester les boutons de flux</button>
        <div id="flowButtonsResult" class="log"></div>
    </div>

    <div class="test-section">
        <h2>Test 4: √âtats des Boutons</h2>
        <p class="info">V√©rification des √©tats activ√©/d√©sactiv√©</p>
        <button onclick="testButtonStates()">Tester les √©tats</button>
        <div id="buttonStatesResult" class="log"></div>
    </div>

    <div class="test-section">
        <h2>R√©sum√© des Tests de Navigation</h2>
        <div id="navSummary" class="log"></div>
    </div>

    <!-- Simulation des √©l√©ments de l'UI originale -->
    <div style="display: none;">
        <div id="wizardStep0" class="wizard-step">√âtape 0 Content</div>
        <div id="wizardStep1" class="wizard-step">√âtape 1 Content</div>
        <div id="wizardStep2" class="wizard-step">√âtape 2 Content</div>
        <div id="wizardStep3" class="wizard-step">√âtape 3 Content</div>
        <div id="wizardStep4" class="wizard-step">√âtape 4 Content</div>

        <button id="step0Next" disabled>Continuer</button>
        <button id="step1Back">‚Üê Retour</button>
        <button id="step1Next" disabled>Suivant ‚Üí</button>
        <button id="step2Back">‚Üê Retour</button>
        <button id="step2Generate">G√©n√©rer les Tokens ‚Üí</button>
        <button id="step4Back">‚Üê Retour</button>
        <button id="step4ApplyAll" style="display: none;">‚úÖ Valider</button>

        <div id="modeToggle" class="hidden">Mode Toggle</div>
    </div>

    <script>
        var currentStep = 0;
        var autoNavInterval = null;
        var navTestResults = {
            autoNavigation: false,
            manualNavigation: false,
            flowButtons: false,
            buttonStates: false
        };

        // Simulation des variables et fonctions de l'UI originale
        var wizardStep0 = document.getElementById('wizardStep0');
        var wizardStep1 = document.getElementById('wizardStep1');
        var wizardStep2 = document.getElementById('wizardStep2');
        var wizardStep3 = document.getElementById('wizardStep3');
        var wizardStep4 = document.getElementById('wizardStep4');

        var step0Next = document.getElementById('step0Next');
        var step1Back = document.getElementById('step1Back');
        var step1Next = document.getElementById('step1Next');
        var step2Back = document.getElementById('step2Back');
        var step2Generate = document.getElementById('step2Generate');
        var step4Back = document.getElementById('step4Back');
        var step4ApplyAll = document.getElementById('step4ApplyAll');

        var modeToggle = document.getElementById('modeToggle');

        // Fonction switchStep simul√©e (bas√©e sur l'originale)
        function switchStep(stepNumber) {
            // Hide all steps
            document.querySelectorAll('.wizard-step').forEach(function(step) {
                step.classList.remove('active');
            });

            // Update step indicators
            document.querySelectorAll('.step').forEach(function(step) {
                step.classList.remove('active');
            });
            document.getElementById('step' + stepNumber).classList.add('active');

            // Show the target step
            currentStep = stepNumber;

            var targetStep = document.getElementById('wizardStep' + stepNumber);
            if (targetStep) {
                targetStep.classList.add('active');
            }

            // Step-specific logic
            if (stepNumber === 0) {
                if (modeToggle) modeToggle.classList.add('hidden');
            } else if (stepNumber === 1) {
                if (modeToggle) modeToggle.classList.add('hidden');
            } else if (stepNumber === 2) {
                if (modeToggle) modeToggle.classList.add('hidden');
            } else if (stepNumber === 3) {
                if (modeToggle) modeToggle.classList.remove('hidden');
            } else if (stepNumber === 4) {
                if (modeToggle) modeToggle.classList.add('hidden');
            }

            log('Navigation manuelle vers √©tape ' + stepNumber, 'info', 'manualNavResult');
            navTestResults.manualNavigation = true;
            updateNavSummary();
        }

        function log(message, type, targetId) {
            var colorClass = type || 'info';
            var resultDiv = targetId ? document.getElementById(targetId) : document.getElementById('autoNavResult');
            var timestamp = new Date().toLocaleTimeString();
            resultDiv.innerHTML += '<div class="' + colorClass + '">' + timestamp + ' - ' + message + '</div>';
            resultDiv.scrollTop = resultDiv.scrollHeight;
        }

        function testAutoNavigation() {
            if (autoNavInterval) return;

            var resultDiv = document.getElementById('autoNavResult');
            resultDiv.innerHTML = log('D√©but de la navigation automatique...', 'info');

            var step = 0;
            var maxSteps = 5;

            autoNavInterval = setInterval(function() {
                switchStep(step);
                log('‚úÖ √âtape ' + step + ' atteinte automatiquement', 'success');

                step++;
                if (step >= maxSteps) {
                    clearInterval(autoNavInterval);
                    autoNavInterval = null;
                    log('üéâ Navigation automatique termin√©e avec succ√®s', 'success');
                    navTestResults.autoNavigation = true;
                    updateNavSummary();
                }
            }, 1000);
        }

        function stopAutoNavigation() {
            if (autoNavInterval) {
                clearInterval(autoNavInterval);
                autoNavInterval = null;
                log('Navigation automatique arr√™t√©e', 'warning', 'autoNavResult');
            }
        }

        function testFlowButtons() {
            var resultDiv = document.getElementById('flowButtonsResult');
            resultDiv.innerHTML = log('Test des boutons de flux...', 'info');

            // Simuler les clics sur les boutons de flux
            var buttonsToTest = [
                { id: 'step0Next', name: 'Continuer (√âtape 0)' },
                { id: 'step1Back', name: 'Retour (√âtape 1)' },
                { id: 'step1Next', name: 'Suivant (√âtape 1)' },
                { id: 'step2Back', name: 'Retour (√âtape 2)' },
                { id: 'step2Generate', name: 'G√©n√©rer (√âtape 2)' },
                { id: 'step4Back', name: 'Retour (√âtape 4)' }
            ];

            buttonsToTest.forEach(function(btn) {
                var button = document.getElementById(btn.id);
                if (button) {
                    log('‚úÖ Bouton "' + btn.name + '" trouv√©', 'success');
                } else {
                    log('‚ùå Bouton "' + btn.name + '" manquant', 'error');
                }
            });

            navTestResults.flowButtons = true;
            updateNavSummary();
        }

        function testButtonStates() {
            var resultDiv = document.getElementById('buttonStatesResult');
            resultDiv.innerHTML = log('Test des √©tats des boutons...', 'info');

            // Test initial states
            var initialStates = [
                { button: step0Next, name: 'step0Next', expectedDisabled: true },
                { button: step1Next, name: 'step1Next', expectedDisabled: true }
            ];

            initialStates.forEach(function(test) {
                if (test.button) {
                    var isDisabled = test.button.disabled;
                    var expected = test.expectedDisabled;
                    if (isDisabled === expected) {
                        log('‚úÖ ' + test.name + ' : √©tat correct (' + (expected ? 'd√©sactiv√©' : 'activ√©') + ')', 'success');
                    } else {
                        log('‚ùå ' + test.name + ' : √©tat incorrect (attendu: ' + (expected ? 'd√©sactiv√©' : 'activ√©') + ', actuel: ' + (isDisabled ? 'd√©sactiv√©' : 'activ√©') + ')', 'error');
                    }
                } else {
                    log('‚ùå Bouton ' + test.name + ' introuvable', 'error');
                }
            });

            navTestResults.buttonStates = true;
            updateNavSummary();
        }

        function updateNavSummary() {
            var summaryDiv = document.getElementById('navSummary');
            var summary = '<h3>R√©sum√© des Tests de Navigation</h3>';

            summary += '<div>üîÑ Navigation auto: ' + (navTestResults.autoNavigation ? '‚úÖ PASS' : '‚ùå FAIL') + '</div>';
            summary += '<div>üéØ Navigation manuelle: ' + (navTestResults.manualNavigation ? '‚úÖ PASS' : '‚ùå FAIL') + '</div>';
            summary += '<div>üîò Boutons de flux: ' + (navTestResults.flowButtons ? '‚úÖ PASS' : '‚ùå FAIL') + '</div>';
            summary += '<div>‚ö° √âtats boutons: ' + (navTestResults.buttonStates ? '‚úÖ PASS' : '‚ùå FAIL') + '</div>';

            var allPassed = navTestResults.autoNavigation && navTestResults.manualNavigation &&
                           navTestResults.flowButtons && navTestResults.buttonStates;
            summary += '<div style="margin-top: 10px; font-weight: bold;">';
            summary += 'R√©sultat global: ' + (allPassed ? '‚úÖ TOUS LES TESTS R√âUSSIS' : '‚ùå √âCHECS D√âTECT√âS');
            summary += '</div>';

            summaryDiv.innerHTML = summary;
        }

        // Test automatique au chargement
        window.addEventListener('load', function() {
            setTimeout(function() {
                testFlowButtons();
                setTimeout(testButtonStates, 500);
            }, 100);
        });
    </script>
</body>
</html>